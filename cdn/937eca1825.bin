<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SXTREAM Sign Up</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .glass {
      background: rgba(30, 41, 59, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(148, 163, 184, 0.1);
    }

    .toggle-password {
      cursor: pointer;
      transition: color 0.3s ease;
      z-index: 10;
    }

    .toggle-password:hover {
      color: #34d399;
    }

    .toggle-password:active {
      transform: scale(0.95);
    }
  </style>
</head>
<body class="text-white">

  <div class="w-full max-w-md">

    <!-- Logo -->
    <div class="text-center mb-8">
      <div class="flex flex-col items-center mb-4">
        <img src="https://www.itzky.xyz/file/pxbivr67pc.png" alt="SXTREAM logo" class="w-35 h-35 mb-4" />
      </div>
      <h2 class="text-2xl font-bold mb-2">Create Account</h2>
      <p class="text-gray-400">Sign up to get started with SXTREAM API</p>
    </div>

    <!-- Flash Message -->
    <% if (success_msg) { %>
      <div class="mb-4 text-green-400 text-sm text-center"><%= success_msg %></div>
    <% } %>
    <% if (error_msg) { %>
      <div class="mb-4 text-red-500 text-sm text-center"><%= error_msg %></div>
    <% } %>

    <!-- Register Form -->
    <div class="glass rounded-xl p-8">
      <form action="/auth/sign-up" method="POST" class="space-y-5">
        
        <!-- Username -->
        <div>
          <label class="block text-sm font-medium mb-2 text-gray-300">Username</label>
          <div class="relative">
            <i class="fas fa-user absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
            <input 
              type="text" 
              name="username"
              maxlength="13"
              placeholder="Enter your username" 
              required
              class="w-full glass border border-gray-600/50 rounded-lg pl-12 pr-4 py-3 focus:outline-none focus:border-emerald-400 transition text-white placeholder-gray-400" 
            />
          </div>
        </div>

        <!-- Email -->
        <div>
          <label class="block text-sm font-medium mb-2 text-gray-300">Email</label>
          <div class="relative">
            <i class="fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
            <input 
              type="email" 
              name="email"
              placeholder="Enter your email" 
              required
              class="w-full glass border border-gray-600/50 rounded-lg pl-12 pr-4 py-3 focus:outline-none focus:border-emerald-400 transition text-white placeholder-gray-400" 
            />
          </div>
        </div>

        <!-- Password -->
        <div>
          <label class="block text-sm font-medium mb-2 text-gray-300">Password</label>
          <div class="relative">
            <i class="fas fa-lock absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
            <input 
              type="password" 
              name="password"
              id="passwordInput"
              minlength="8"
              placeholder="Enter your password" 
              required
              class="w-full glass border border-gray-600/50 rounded-lg pl-12 pr-12 py-3 focus:outline-none focus:border-emerald-400 transition text-white placeholder-gray-400" 
            />
            <i class="fas fa-eye absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 toggle-password" id="togglePassword"></i>
          </div>
        </div>

        <!-- Confirm Password -->
        <div>
          <label class="block text-sm font-medium mb-2 text-gray-300">Confirm Password</label>
          <div class="relative">
            <i class="fas fa-lock absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
            <input 
              type="password" 
              name="confirmPassword"
              id="confirmPasswordInput"
              minlength="8"
              placeholder="Confirm your password" 
              required
              class="w-full glass border border-gray-600/50 rounded-lg pl-12 pr-12 py-3 focus:outline-none focus:border-emerald-400 transition text-white placeholder-gray-400" 
            />
            <i class="fas fa-eye absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 toggle-password" id="toggleConfirmPassword"></i>
          </div>
        </div>

        <!-- Register Button -->
        <button 
          type="submit" 
          class="w-full bg-gradient-to-r from-emerald-400 to-blue-500 text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-3 transition hover:opacity-90 mt-6"
        >
          <i class="fas fa-user-plus"></i>
          <span>Register</span>
        </button>
      </form>

      <!-- Sign In Link -->
      <p class="text-center text-gray-400 text-sm mt-6">
        Sudah memiliki akun? 
        <a href="/auth/sign-in" class="text-emerald-400 hover:text-emerald-300 transition font-medium">Login</a>
      </p>

      <!-- Privacy Policy -->
      <p class="text-center text-gray-400 text-sm mt-4">
        <a href="#" data-modal="privacy" class="hover:text-emerald-300 transition">Privacy Policy</a>
      </p>
    </div>

    <!-- Footer -->
    <p class="text-center text-gray-500 text-sm mt-6">Â© 2025 SXTREAM API</p>
  </div>

  <!-- Privacy Policy Modal -->
  <div id="privacyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
    <div class="glass rounded-xl max-w-lg w-full p-6 relative max-h-96 overflow-y-auto">
      <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-white">
        <i class="fas fa-times text-xl"></i>
      </button>
      <h3 class="text-xl font-bold mb-4">Privacy Policy</h3>
      <div class="text-gray-300 text-sm space-y-3">
        <p>Your privacy content goes here...</p>
      </div>
      <button onclick="closeModal()" class="mt-6 w-full bg-gray-700 hover:bg-gray-600 text-white py-2 rounded-lg transition">
        Close
      </button>
    </div>
  </div>

  <script>
    // Toggle password visibility functions
    function togglePasswordVisibility(inputId, iconId) {
      const input = document.getElementById(inputId);
      const icon = document.getElementById(iconId);
      
      if (input.type === 'password') {
        input.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
      } else {
        input.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
      }
    }

    // Modal functions
    function openModal() {
      const modal = document.getElementById('privacyModal');
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    }

    function closeModal() {
      const modal = document.getElementById('privacyModal');
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    }

    document.addEventListener('DOMContentLoaded', function() {
      // Add click event for password toggle
      document.getElementById('togglePassword').addEventListener('click', function() {
        togglePasswordVisibility('passwordInput', 'togglePassword');
      });

      // Add click event for confirm password toggle
      document.getElementById('toggleConfirmPassword').addEventListener('click', function() {
        togglePasswordVisibility('confirmPasswordInput', 'toggleConfirmPassword');
      });

      // Modal trigger
      const modalTrigger = document.querySelector('[data-modal="privacy"]');
      if (modalTrigger) {
        modalTrigger.addEventListener('click', function(e) {
          e.preventDefault();
          openModal();
        });
      }

      // Close modal when clicking outside
      document.getElementById('privacyModal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeModal();
        }
      });
    });
  </script>

</body>
</html>